<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø²Ø§Ø¬Ù„ Ø¨Ø±Ùˆ - Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ WhatsApp Ø¬Ù…Ø§Ø¹ÙŠ</title>
    <style>
        :root { 
            --wa-green: #25D366; 
            --wa-dark: #075E54; 
            --error: #e74c3c; 
            --success: #2ecc71; 
            --primary: #3498db;
            --warning: #f1c40f;
            --gray: #95a5a6;
        }
        
        body { 
            font-family: 'Segoe UI', Tahoma, sans-serif; 
            background: linear-gradient(135deg, #f0f2f5 0%, #dfe6e9 100%);
            margin: 0; 
            padding: 20px; 
            display: flex; 
            justify-content: center;
            min-height: 100vh;
        }
        
        .app-container { 
            background: white; 
            width: 100%; 
            max-width: 600px; 
            padding: 30px; 
            border-radius: 20px; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.1);
            margin: auto;
        }
        
        h2 { 
            text-align: center; 
            color: var(--wa-dark); 
            border-bottom: 3px solid var(--wa-green); 
            padding-bottom: 15px; 
            margin-top: 0;
        }
        
        .box { 
            background: #f8f9fa; 
            border: 2px solid #e9ecef; 
            padding: 20px; 
            border-radius: 15px; 
            margin-bottom: 20px; 
        }
        
        label { 
            display: block; 
            font-weight: bold; 
            margin-bottom: 12px; 
            color: #2c3e50;
        }
        
        textarea, input { 
            width: 100%; 
            padding: 14px; 
            border: 2px solid #ddd; 
            border-radius: 10px; 
            box-sizing: border-box; 
            font-size: 15px; 
            font-family: inherit;
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .btn { 
            width: 100%; 
            padding: 16px; 
            border: none; 
            border-radius: 10px; 
            cursor: pointer; 
            font-weight: bold; 
            font-size: 16px; 
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-send { 
            background: var(--wa-green); 
            color: white; 
        }
        
        .btn-send:hover {
            background: #1da851;
        }
        
        .btn-next { 
            background: var(--warning); 
            color: #333; 
            display: none; 
        }
        
        #statusLog { 
            font-size: 15px; 
            text-align: center; 
            margin: 15px 0; 
            font-weight: bold;
            padding: 12px;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .alert { 
            padding: 15px; 
            border-radius: 10px; 
            font-size: 14px; 
            margin-bottom: 20px; 
            line-height: 1.6;
            border-right: 5px solid #ffeeba;
            background: #fff3cd;
        }
        
        .progress-container {
            margin: 20px 0;
            display: none;
        }
        
        .progress-bar { 
            width: 100%; 
            height: 12px; 
            background: #e0e0e0; 
            border-radius: 6px; 
            overflow: hidden; 
            margin-bottom: 10px;
        }
        
        .progress-fill { 
            height: 100%; 
            background: linear-gradient(90deg, var(--wa-green), var(--primary));
            width: 0%; 
            transition: width 0.5s ease;
            border-radius: 6px;
        }
        
        @media (max-width: 768px) {
            body { padding: 10px; }
            .app-container { padding: 20px; }
            .btn { padding: 14px; }
        }
    </style>
</head>
<body>

<div class="app-container">
    <h2>ğŸš€ Ø²Ø§Ø¬Ù„ Ø¨Ø±Ùˆ - Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ WhatsApp Ø¬Ù…Ø§Ø¹ÙŠ</h2>
    
    <div class="alert">
        <strong>âš ï¸ ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù†Ø´Ø± Ø¹Ù„Ù‰ GitHub Pages:</strong><br><br>
        1. Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† <strong>index.html</strong><br>
        2. ÙŠØ¬Ø¨ Ø±ÙØ¹Ù‡ ÙÙŠ <strong>Ø§Ù„Ø¬Ø°Ø±</strong> (Ù„ÙŠØ³ Ø¯Ø§Ø®Ù„ Ù…Ø¬Ù„Ø¯)<br>
        3. Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹: <strong>username.github.io</strong><br>
        4. Ø¨Ø¹Ø¯ Ø§Ù„Ø±ÙØ¹ØŒ Ø§Ù†ØªØ¸Ø± 1-2 Ø¯Ù‚ÙŠÙ‚Ø© Ø«Ù… Ø§ÙØ­Øµ Ø§Ù„Ù…ÙˆÙ‚Ø¹
    </div>
    
    <div class="box">
        <label>ğŸ“ Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:</label>
        <textarea id="mainMessage" rows="4" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..."></textarea>
        
        <label style="margin-top: 15px;">ğŸ”— Ø±Ø§Ø¨Ø· Ù…Ù„Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ):</label>
        <input type="text" id="fileUrl" placeholder="https://example.com/image.jpg">
    </div>
    
    <div class="box">
        <label>ğŸ“± Ù‚Ø§Ø¦Ù…Ø© Ø£Ø±Ù‚Ø§Ù… WhatsApp:</label>
        <textarea id="phoneNumbers" rows="5" placeholder="Ø¶Ø¹ ÙƒÙ„ Ø±Ù‚Ù… ÙÙŠ Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯
Ù…Ø«Ø§Ù„: +966511234567
Ù…Ø«Ø§Ù„: 966522345678"></textarea>
    </div>
    
    <div class="progress-container" id="progressContainer">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" id="progressText">0%</div>
    </div>
    
    <div id="statusLog">âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø±Ø³Ø§Ù„</div>
    
    <button class="btn btn-send" id="startBtn" onclick="startCampaign()">
        ğŸš€ Ø¨Ø¯Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­Ù…Ù„Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©
    </button>
    
    <button class="btn btn-next" id="nextBtn" onclick="processNext()">
        â¡ï¸ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ§Ù„ÙŠ
    </button>
</div>

<script>
    let contacts = [];
    let currentIdx = 0;
    let totalContacts = 0;

    function startCampaign() {
        const rawNums = document.getElementById('phoneNumbers').value;
        const numbersArray = rawNums.split('\n').map(n => n.trim()).filter(n => n !== '');
        
        if (numbersArray.length === 0) {
            alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø£ÙˆÙ„Ø§Ù‹");
            return;
        }
        
        // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…
        contacts = numbersArray.map(num => {
            let cleanNum = num.replace(/\s+/g, '').replace(/[^0-9+]/g, '');
            if (cleanNum.startsWith('00')) {
                cleanNum = '+' + cleanNum.substring(2);
            } else if (/^[0-9]{10,}$/.test(cleanNum) && !cleanNum.startsWith('+')) {
                cleanNum = '+966' + cleanNum.substring(cleanNum.startsWith('0') ? 1 : 0);
            }
            return cleanNum;
        }).filter(num => /^\+[1-9]\d{10,14}$/.test(num));
        
        if (contacts.length === 0) {
            alert("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£Ø±Ù‚Ø§Ù… ØµØ§Ù„Ø­Ø©");
            return;
        }
        
        if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø±Ø³Ø§Ù„ ${contacts.length} Ø±Ø³Ø§Ù„Ø©ØŸ`)) {
            return;
        }
        
        totalContacts = contacts.length;
        currentIdx = 0;
        
        document.getElementById('startBtn').style.display = 'none';
        document.getElementById('nextBtn').style.display = 'block';
        document.getElementById('progressContainer').style.display = 'block';
        
        document.getElementById('statusLog').textContent = `ğŸš€ Ø¨Ø¯Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ ${totalContacts} Ø±Ù‚Ù…...`;
        
        processNext();
    }
    
    function processNext() {
        if (currentIdx >= totalContacts) {
            document.getElementById('statusLog').innerHTML = `ğŸ‰ Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ø­Ù…Ù„Ø©!<br><small>ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ${totalContacts} Ø±Ø³Ø§Ù„Ø©</small>`;
            document.getElementById('nextBtn').innerHTML = 'ğŸ”„ Ø¨Ø¯Ø¡ Ø­Ù…Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø©';
            document.getElementById('nextBtn').onclick = () => location.reload();
            return;
        }
        
        const phone = contacts[currentIdx];
        let finalMsg = document.getElementById('mainMessage').value;
        const fileLink = document.getElementById('fileUrl').value;
        
        if (fileLink) {
            finalMsg += `\n\nğŸ”— Ø§Ù„Ù…Ø±ÙÙ‚: ${fileLink}`;
        }
        
        const whatsappUrl = `https://wa.me/${phone}?text=${encodeURIComponent(finalMsg)}`;
        
        document.getElementById('statusLog').innerHTML = `ğŸ“¤ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ${currentIdx + 1} Ù…Ù† ${totalContacts}<br><small>${phone}</small>`;
        
        // ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
        const progress = ((currentIdx / totalContacts) * 100);
        document.getElementById('progressFill').style.width = `${progress}%`;
        document.getElementById('progressText').textContent = `${Math.round(progress)}%`;
        
        // ÙØªØ­ Ù†Ø§ÙØ°Ø© WhatsApp
        window.open(whatsappUrl, '_blank', 'width=600,height=700');
        
        currentIdx++;
        
        if (currentIdx < totalContacts) {
            document.getElementById('nextBtn').innerHTML = `â¡ï¸ Ø§Ù„ØªØ§Ù„ÙŠ (${currentIdx + 1} Ù…Ù† ${totalContacts})`;
        } else {
            document.getElementById('nextBtn').innerHTML = 'âœ… Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„';
        }
    }
    
    // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ localStorage
    window.onload = () => {
        document.getElementById('mainMessage').value = localStorage.getItem('z_msg') || '';
        document.getElementById('phoneNumbers').value = localStorage.getItem('z_nums') || '';
        document.getElementById('fileUrl').value = localStorage.getItem('z_file') || '';
        
        // Ø§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
        document.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                e.preventDefault();
                localStorage.setItem('z_msg', document.getElementById('mainMessage').value);
                localStorage.setItem('z_nums', document.getElementById('phoneNumbers').value);
                localStorage.setItem('z_file', document.getElementById('fileUrl').value);
                document.getElementById('statusLog').textContent = 'ğŸ’¾ ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª';
            }
        });
    };
</script>

</body>
</html>
